{% load static %}

<article class="card mb-3 w-100" data-card-id="{{ question.id }}" data-card-rating="{{ question.rating }}" data-card-type="question">
    <div class="row g-0">
        <div class="col-2 p-2 d-flex flex-column align-items-center">
            <p class="mb-1">{{ question.user.displayed_name }}</p>
            <div class="w-100 mb-2 d-flex align-items-center" style="height: 100px; overflow: hidden;">
                <img src="{{ question.user.avatar.url }}" class="img-fluid" alt="...">
            </div>
            <div class="d-flex flex-row align-items-center">
                <button class="btn btn-primary btn-sm mb-1 me-1" id="vote-up-button" style="width: 30px; height: 30px; padding: 0; background-color: #4f565e; border-color: #4f565e">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-square" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm8.5 9.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z"/>
                    </svg>
                </button>
                <div class="input-group flex-nowrap mb-1" style="width: 70px;">
                    <p class="form-control text-center p-1 m-0" id="rating" style="font-size: 11px;">Рейтинг: {{ question.rating }}</p>
                </div>
                <button class="btn btn-primary btn-sm mb-1 ms-1" id="vote-down-button" style="width: 30px; height: 30px; padding: 0; background-color: #4f565e; border-color: #4f565e">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-square" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
                    </svg>
                </button>
            </div>
        </div>
        <div class="col">
            <div class="card-body">
                <h5 class="card-title">
                    <a href="{% url "question" question.id %}">{{ question.title }}</a>
                </h5>
                <p class="card-text">
                    {{ question.text }}
                </p>
                {% if question.user.user_id == user.id %}
                    <a href="{% url 'edit_question' question.id %}" class="btn btn-warning btn-sm mb-4">Редактировать</a>
                    <a href="{% url 'delete_question' question.id %}" class="btn btn-danger btn-sm mb-4">Удалить</a>
                {% endif %}

                <div class="row">
                    <a class="col-4" href="{% url "question" question.id %}">ответы ({{ question.answers_count }})</a>
                    <div class="col-8">
                        <span>Теги:</span>
                        {% for tag in question.tags.all %}
                            <a href="{% url "tag" tag.name %}">{{ tag.name }}</a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</article>
<style>
    #vote-up-button:active, #vote-up-button:focus, #vote-down-button:active, #vote-down-button:focus {
        border-color: #4f565e !important;
    }
</style>
